<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="generator" content="Observable Framework v1.13.2">
<title>Departures | Charleston International Airport</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&amp;display=swap" crossorigin>
<link rel="preload" as="style" href="./_import/custom-style.7fd960ca.css">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&amp;display=swap" crossorigin>
<link rel="stylesheet" type="text/css" href="./_import/custom-style.7fd960ca.css">
<link rel="modulepreload" href="./_observablehq/client.e369bcc0.js">
<link rel="modulepreload" href="./_observablehq/runtime.f168f711.js">
<link rel="modulepreload" href="./_observablehq/stdlib.a7574edc.js">
<link rel="modulepreload" href="./_import/config.c18b52dd.js">
<link rel="icon" href="./_file/observable.1af93621.png" type="image/png" sizes="32x32">
<script type="module">

import {define} from "./_observablehq/client.e369bcc0.js";

define({id: "56a44cf8", inputs: ["display"], outputs: ["API_CONFIG","carrierCodes","todaysDate","mapData","airlineLogos","convertTo12Hour","getData","locations","departureData","departuresRaw","departures","createDepartureBoard"], body: async (display) => {
const {API_CONFIG, carrierCodes, todaysDate, mapData, airlineLogos, convertTo12Hour, getData, locations} = await import("./_import/config.c18b52dd.js");

const departureData = await getData(API_CONFIG.departureUrl);

const departuresRaw = departureData.data.map(flight =>  mapData(flight));

const departures = departuresRaw.filter(item => 
  item.departureDate === todaysDate &&
  item.estimatedDeparture !== undefined &&
  carrierCodes.includes(item.carrierCode)
);

function createDepartureBoard(departures) {

  departures.sort((a, b) => a.departureTime.localeCompare(b.departureTime));
  
  const table = document.createElement("table");
  table.classList.add("departure-board");

  const thead = document.createElement("thead");
  thead.innerHTML = `
    <tr>
      <th></th>
      <th>Flight</th>
      <th>Destination</th>
      <th>Time</th>
      <th>Gate</th>
      <th>Status</th>
    </tr>
  `;
  table.appendChild(thead);

  const tbody = document.createElement("tbody");
  departures.forEach(departure => {
    const row = document.createElement("tr");
    row.innerHTML = `
      <td><img src="${airlineLogos[departure.carrierCode]}" class="airline-logo" alt="${departure.airline}"></td>
      <td>${departure.flightNumber}</td>
      <td>${locations[departure.arrivalIcao] || departure.arrivalIcao }</td>
      <td>${convertTo12Hour(departure.departureTime)}</td>
      <td>${departure.departrueGate}</td>
      <td class="${departure.departureOutGateTimeliness.toLowerCase()}">${departure.departureOutGateTimeliness}</td>
    `;
    tbody.appendChild(row);
  });
  table.appendChild(tbody);

  return table;
}


display(createDepartureBoard(departures));
return {API_CONFIG,carrierCodes,todaysDate,mapData,airlineLogos,convertTo12Hour,getData,locations,departureData,departuresRaw,departures,createDepartureBoard};
}});

</script>
</head>
<body>
<div id="observablehq-center">
<main id="observablehq-main" class="observablehq">
<h1 id="departures" tabindex="-1"><a class="observablehq-header-anchor" href="#departures">Departures</a></h1>
<div class="chip-description">
  <div class="chip-caption">
  See page:
  </div>
  <a href="./" class="chip">
  Home
  </a>
  <a href="./arrivals" class="chip">
  Arrivals
  </a>
</div>
<div class="observablehq observablehq--block"><!--:56a44cf8:--></div>
</main>
<footer id="observablehq-footer">
<div>Built with <a href="https://observablehq.com/" target="_blank" rel="noopener noreferrer">Observable</a> on <a title="2025-02-16T15:49:20">Feb 16, 2025</a>.</div>
</footer>
</div>
</body>
</html>
